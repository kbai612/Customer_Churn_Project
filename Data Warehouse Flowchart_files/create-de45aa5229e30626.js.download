(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5250],{14758:function(e,t,n){"use strict";var a,r=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return r.createElement("svg",i({width:15,height:15,viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=r.createElement("path",{d:"M4.5 6.5L1.328 9.672a2.828 2.828 0 104 4L8.5 10.5m2-2l3.172-3.172a2.829 2.829 0 00-4-4L6.5 4.5m-2 6l6-6",fill:"none",stroke:"currentColor"})))}},35174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/create",function(){return n(94911)}])},3688:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,r=n(47842),i=n(52322),s=n(2784),o=n(45932),l=n(6039),c=n.n(l),u=(a={},(0,r.Z)(a,o.hT.CREATE_SURVEY_INCOMPLETE,[o.lp.CREATE_TEAM,o.lp.INVITE_MEMBERS,o.lp.PREFERENCES,o.lp.ROLE,o.lp.TOOLS]),(0,r.Z)(a,o.hT.CREATE_SURVEY_COMPLETE,[o.lp.CREATE_TEAM,o.lp.INVITE_MEMBERS]),(0,r.Z)(a,o.hT.JOIN_EXISTING_TEAM,[o.lp.PREFERENCES,o.lp.ROLE,o.lp.TOOLS]),a),m=(0,s.memo)(function(e){var t=e.step,n=e.flow,a=u[void 0===n?o.hT.CREATE_SURVEY_INCOMPLETE:n];return(0,i.jsxs)("div",{className:c().signUpStepInfo,children:[String(a.indexOf(t)+1)," of ",a.length]})})},52012:function(e,t,n){"use strict";n.d(t,{My:function(){return v},Qb:function(){return p},p9:function(){return f}});var a=n(98788),r=n(22970),i=n(5632),s=n.n(i),o=n(42541),l=n(90581),c=n(99669),u={defaultTTL:86400},m=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;(0,l.Z)(this,e),this._storage=t,this._options=n}var t=e.prototype;return t.setItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._options.defaultTTL,a=Math.floor(Date.now()/1e3);this._storage.setItem(e,{value:t,exp:a+n})},t.getItem=function(e){var t=this._storage.getItem(e);if(null==t||"object"!=typeof t)return t;if(!Reflect.has(t,"value")||!Reflect.has(t,"exp"))return console.warn('ExpiryLocalStorage.getItem("'.concat(e,'") - data is malformed'),t),null;var n=Math.floor(Date.now()/1e3);return n>t.exp?(console.debug('ExpiryLocalStorage.getItem("'.concat(e,'") - data has expired ').concat(n-t.exp," seconds ago")),this._storage.removeItem(e),null):t.value},t.removeItem=function(e){this._storage.removeItem(e)},t.clear=function(){this._storage.clear()},e}())(c.J),d="auth/redirect";function h(e){return!(!e.startsWith("/")||e.includes("/../")||e.includes("/./")||e.includes("//"))}function f(e){if(!h(e))return void console.warn("Invalid redirect path attempted: ".concat(e));var t=e.replace(/[<>"']/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"");m.setItem(d,t,900)}function v(){var e=m.getItem(d);return"string"!=typeof e?null:h(e)?e:(console.warn("Invalid redirect path found in storage: ".concat(e)),E(),null)}function E(){m.removeItem(d)}function p(e,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(function(e,t){var n;return(0,r.__generator)(this,function(a){switch(a.label){case 0:if(n=v(),console.debug("Redirect to ".concat(null!=n?n:e)),!(n&&h(n)))return[3,2];return E(),o.Z.trackEvent("login-page","redirect_to_saved_path",{source:t,url:n,workspaceId:n.split("/")[2]}),[4,s().replace(n)];case 1:return a.sent(),[3,4];case 2:return[4,s().replace(e)];case 3:a.sent(),a.label=4;case 4:return[2]}})})).apply(this,arguments)}},94911:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return K},default:function(){return Q}});var a,r,i=n(87394),s=n(52322),o=n(2784),l=n(5632),c=n(11269),u=n(96933),m=n(66161),d=n(45932),h=n(53562),f=n(42541),v=n(48617),E=n(3688),p=n(70865),g=n(96670),_=n(63955),T=n(76793),b=n(55929),x=n(95162),I=n(10380),w=n(94254),S=n(30739),C=(0,o.memo)(function(e){var t=e.className,n=e.onTeamCreated,a=(0,_.cI)({reValidateMode:"onChange"}),r=a.register,i=a.formState,o=a.handleSubmit,l=i.errors,c=i.submitCount,u=(0,T.K)({onSuccess:n}),m=u.canCreateTeam,d=u.isLoadingCreateTeamCheck,h=u.handleCreateTeam,f=u.error,v=u.loading,E=u.defaultTeamName;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("form",{id:"create-team-form",onSubmit:o(h),children:(0,s.jsx)(I.Z,{className:t,children:(0,s.jsx)(b.Z,(0,g.Z)((0,p.Z)({size:b.Z.Sizes.LARGE,label:"Team Name",placeholder:"Team Name",autoFocus:!0,defaultValue:E},r("name",{required:!0,minLength:1,maxLength:64})),{error:l.name,touched:c>0}))})}),(0,s.jsx)(w.Z,{children:(0,s.jsx)(x.ZP,{form:"create-team-form","data-testid":"create-team-btn",variant:x.ZP.Variants.REGULAR,size:x.ZP.Sizes.X_LARGE,isLoading:v,disabled:v||!m||d,type:"submit",children:"Continue"})}),(0,s.jsx)(S.Z,{error:null==f?void 0:f.message})]})});function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var j=function(e){return o.createElement("svg",Z({width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=o.createElement("g",{fill:"var(--green-success)"},o.createElement("path",{d:"M5.5 0a3.499 3.499 0 100 6.996A3.499 3.499 0 105.5 0zM3.5 8.994a3.5 3.5 0 00-3.5 3.5v2.497h11v-2.497a3.5 3.5 0 00-3.5-3.5h-4zM12.5 10H12v5h3v-2.5a2.5 2.5 0 00-2.5-2.5z"}),o.createElement("path",{d:"M11.5 4a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"}))))},L=n(66140),R=(0,o.memo)(function(e){var t=e.onTeamCreated,n=(0,h.Z)(),a=(0,u.aF)(),r=!!(null==a?void 0:a.surveyData);return(0,o.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"team_name"})},[]),(0,s.jsxs)(v.Z,{label:"Team Name",labelIcon:(0,s.jsx)(j,{}),title:"What should we call your team?",footer:(null==n?void 0:n.length)?(0,s.jsxs)(s.Fragment,{children:["Or ",(0,s.jsx)("a",{href:"/team/join",children:"join existing team"})," instead"]}):null,children:[(0,s.jsx)("p",{children:"You can always change this later from settings."}),(0,s.jsx)(C,{onTeamCreated:t}),!L.cm.isSingleTenant&&(0,s.jsx)(E.Z,{step:d.lp.CREATE_TEAM,flow:r?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),M=n(69023),O=n(11929),y=n(95550),N=n(44784),k=n(84054),P=n(52012),A=n(61579),V=n(34224),z=n(2595),U=n(14758),F=n(89038);function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var G=function(e){return o.createElement("svg",B({width:16,height:15,viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=o.createElement("g",{fill:"var(--green-success)"},o.createElement("path",{d:"M15.454.71a.5.5 0 01-.1.144L5.9 10.306l2.67 4.451a.5.5 0 00.889-.06L15.454.71zM5.194 9.6L.743 6.928a.5.5 0 01.06-.889L14.793.045a.5.5 0 00-.146.101L5.194 9.6z"}))))},Y=n(70620),X=n.n(Y),D=(0,o.memo)(function(e){var t=e.teamId,n=(0,l.useRouter)(),a=(0,V.Z)(),r=(0,z.Z)(),i=(0,u.aF)(),c=!!(null==i?void 0:i.surveyData),m=(0,A._)(t),h=(0,_.cI)({mode:"onSubmit"}),T=h.register,b=h.formState,S=h.handleSubmit,C=h.reset;(0,o.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"invite"})},[]),(0,o.useEffect)(function(){m.isEnabled||m.onTurnOn()},[m.isEnabled,m.onTurnOn]);var Z=(0,o.useCallback)(function(){f.Z.trackEvent("team_share_dialog","copy_link_click"),a(m.inviteLink)},[m.inviteLink]),j=(0,o.useCallback)(function(){L.cm.isSingleTenant||c?(0,P.Qb)("/dashboard/all","team_create"):n.push("/user/survey")},[c,n.push]),R=(0,O.UK)(function(e){var n=e.email;r.promise((0,k.Z)({type:y.PA.Email,inviteTo:y.FU.Team,teamId:t,inviterId:i.id,inviteeEmail:n},"team_creation"),{loading:"Inviting ".concat(n),success:"Invitation sent to ".concat(n),error:function(){return"Invite failed"}}),C()}).execute;return(0,s.jsxs)(v.Z,{className:X().inviteMembersView,label:"Invite Teammates",labelIcon:(0,s.jsx)(G,{}),title:"Who do you collaborate with?",children:[(0,s.jsx)("p",{children:"Invite teammates. Everyone will have access to the same dashboard"}),(0,s.jsx)("form",{onSubmit:S(R),children:(0,s.jsxs)(I.Z,{children:[(0,s.jsx)(F.Z,(0,g.Z)((0,p.Z)({size:F.Z.Sizes.LARGE,label:"Invite Teammate",placeholder:"Email address",type:"email",autoComplete:"email"},T("email",{required:!0,validate:N.Le})),{button:(0,s.jsx)(x.ZP,{className:X().inviteBtn,size:x.ZP.Sizes.LARGE,disabled:!b.isValid,onClick:S(R),children:"Invite"}),autoFocus:!0})),(0,s.jsx)("p",{children:(0,s.jsxs)("a",{className:X().copyLink,onClick:Z,children:[(0,s.jsx)(U.Z,{}),"Copy invite link"]})})]})}),(0,s.jsx)(w.Z,{children:(0,s.jsx)(x.ZP,{"data-testid":"end-invite-members-btn",size:x.ZP.Sizes.X_LARGE,onClick:j,children:c?"Create Team":"Continue"})}),(0,s.jsx)(E.Z,{step:d.lp.INVITE_MEMBERS,flow:c?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),K=!0,Q=function(){var e=(0,o.useState)(),t=e[0],n=e[1],a=(0,i.Z)((0,c.p3)(),2),r=(a[0],a[1]),d=(0,l.useRouter)(),h=(0,u.aF)(),f=(0,o.useCallback)(function(e){r(e.id),L.cm.isSingleTenant?(0,P.Qb)("/dashboard/all","team_create"):n(e)},[r]);return d.isReady&&h?(0,s.jsx)(m.Z,{hideSplashOnLoad:!0,children:(0,s.jsx)(M.Z,{staticLogo:!0,children:t&&!L.cm.isSingleTenant?(0,s.jsx)(D,{teamId:t.id}):(0,s.jsx)(R,{onTeamCreated:f})})}):null}},70620:function(e){e.exports={inviteMembersView:"InviteMembersView_inviteMembersView__5KFON",copyLink:"InviteMembersView_copyLink__31kg8",inviteBtn:"InviteMembersView_inviteBtn__fp20_"}},6039:function(e){e.exports={signUpStepInfo:"SignUpStepInfo_signUpStepInfo__FGUMO"}}},function(e){e.O(0,[2888],function(){return e(e.s=35174)}),_N_E=e.O()}]);